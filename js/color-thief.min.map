{"version":3,"file":"color-thief.min.js","sources":["color-thief.js"],"names":["CanvasImage","image","this","canvas","document","createElement","context","getContext","body","appendChild","width","height","drawImage","prototype","clear","clearRect","update","imageData","putImageData","getPixelCount","getImageData","removeCanvas","parentNode","removeChild","ColorThief","getColor","sourceImage","quality","palette","getPalette","dominantColor","colorCount","offset","r","g","b","a","pixels","data","pixelCount","pixelArray","i","push","cmap","MMCQ","quantize","pv","map","array","f","o","d","index","call","slice","naturalOrder","sum","reduce","p","max","Math","apply","getColorIndex","sigbits","PQueue","comparator","sort","contents","sorted","peek","undefined","length","pop","size","debug","VBox","r1","r2","g1","g2","b1","b2","histo","vbox","CMap","vboxes","count","volume","getHisto","rval","gval","bval","histosize","Array","forEach","pixel","rshift","vboxFromPixels","rmin","rmax","gmin","gmax","bmin","bmax","medianCutApply","doCut","color","left","right","vbox1","vbox2","d2","dim1","dim2","count2","partialsum","total","copy","min","lookaheadsum","rw","gw","bw","maxw","j","k","maxcolors","iter","lh","target","ncolors","niters","maxIterations","nColors","pq","fractByPopulations","pq2","force","_volume","_count_set","npix","_count","avg","_avg","hval","histoindex","ntot","mult","rsum","gsum","bsum","contains","vb","nearest","d1","pColor","sqrt","pow","forcebw","lowest","idx","highest"],"mappings":"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"}